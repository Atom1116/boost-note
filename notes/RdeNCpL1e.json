{"_id":"note:RdeNCpL1e","title":"ApacheへDjangpを構築する手順","content":"## ApacheへDjangpを構築する手順\n\n\n### 環境\ncentos:7\npython:3.6以上\napache\n\n### 参考\n- [djangoは誰が動かしているのか？（デプロイのための俯瞰）](https://qiita.com/ming_hentech/items/9e21fe175988448e204b)\n- [[CentOS 8] Django アプリのデプロイ 〜 Apache (httpd) 編 〜](https://bitwalk.blogspot.com/2019/12/centos-8-django-apache-httpd.html)\n\n### 手順\n\n1. centosへpython3系をインストール\n```\n$yum install -y https://repo.ius.io/ius-release-el7.rpm\n$yum install -y python36u python36u-libs python36u-devel python36u-pip\n```\n\n2. mod-wsgiをインストール\n```\npip install mod-wsgi \n```\nもしインストールできない場合は以下をcentosへインストール\n```\nyum install httpd httpd-devel\n```\n\n3. wsgi_moduleのpathを確認する\n```\n mod_wsgi-express module-config \n```\n\n4. 追加の設定ファイルを作成\n```\n vim /etc/httpd/conf.d/django.conf\n```\n\n```\nLoadModule wsgi_module \"/usr/local/lib64/python3.6/site-packages/mod_wsgi/server/mod_wsgi-py36.cpython-36m-x86_64-linux-gnu.so\"\nWSGISocketPrefix run/wsgi\n\n<VirtualHost *:8080>  \n    ServerName recipe.com\n    DocumentRoot /var/www/django\n\n\n    WSGIDaemonProcess recipe.com python-path=/var/www/django \n    WSGIProcessGroup recipe.com\n    WSGIScriptAlias / /var/www/django/project/wsgi.py\n\n    Alias /static/ /var/www/django/static/  \n    <Directory /var/www/django/static>  \n    Require all granted  \n    </Directory>\n\n    <Directory /var/www/django/project/ >  \n        <Files wsgi.py>  \n            Require all granted  \n        </Files>  \n    </Directory>  \n</VirtualHost>\n```\n\n5. Djangoのsettings.pyの設定\n- Debugモードをfalseへ\n- ALLOWED_HOSTSの設定\n- STATIC_ROOTの設定\n```\nSTATIC_ROOT = os.path.join(BASE_DIR, \"static\")\n```\n- staticファイル集約コマンド\n```\n$ python manage.py collectstatic\n```","tags":[],"folderPathname":"/Apache/Django","data":{},"createdAt":"2020-10-15T02:39:31.455Z","updatedAt":"2020-10-15T02:40:12.527Z","trashed":false,"_rev":"OGLuR2xU5"}